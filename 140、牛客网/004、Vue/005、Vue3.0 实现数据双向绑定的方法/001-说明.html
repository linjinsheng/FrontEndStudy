<!DOCTYPE html>
<html>
  <head>
    <title>DEMO</title>
  </head>
  <body>
    <div id="container"> 
    </div>
    
    <script>
    console.log('*******************************')
    /*
        Vue3.0 是通过Proxy实现的数据双向绑定，
        Proxy是ES6中新增的一个特性，实现的过程是在目标对象之前设置了一层“拦截”，外界对该对象的访问，都必须先通过这层拦截，
        因此提供了一种机制，可以对外界的访问进行过滤和改写。 
        用法： 
        ES6 原生提供 Proxy 构造函数，用来生成Proxy实例。 
        var proxy = new Proxy(target, handler) 
        target: 是用Proxy包装的被代理对象（可以是任何类型的对象，包括原生数组，函数，甚至另一个代理）。 
        handler: 是一个对象，其声明了代理target的一些操作，其属性是当执行一个操作时定义代理的行为的函数。 
        
        在Vue中，`Object.defineProperty`无法监控到数组下标的变化，导致直接通过数组的下标给数组设置值，不能实时响应。
        目前只针对以上方法做了hack处理，所以数组属性是检测不到的，有局限性
        Object.defineProperty只能劫持对象的属性,因此我们需要对每个对象的每个属性进行遍历。
        Vue里，是通过递归以及遍历data对象来实现对数据的监控的，如果属性值也是对象那么需要深度遍历,
        显然如果能劫持一个完整的对象，不管是对操作性还是性能都会有一个很大的提升。 
        
        Proxy的两个优点：可以劫持整个对象，并返回一个新对象，有13种劫持
    */ 
    
    /**
     * 
      defineProperty和proxy的区别
      defineProperty 
      1、Vue在实例初始化时遍历data中的属性,并使用defineProperty把这些属性全部转为getter/setter.
        当跟踪数据发生变化时,setter会被自动调用;
      2、添加或删除对象的属性时,vue无法检测到;
      3、无法监控到数组下标和长度的变化.
      
      proxy
      1、定义基本操作的自定义行为(如属性查找、赋值、枚举、函数调用);
      2、Proxy直接代理整个对象而非对象属性,只需做一层代理就可以监听同级结构下的所有属性变化,包括新增属性和删除属性;
      3、Proxy可以监听数组的变化.
     */

    </script>
  </body>
</html>
