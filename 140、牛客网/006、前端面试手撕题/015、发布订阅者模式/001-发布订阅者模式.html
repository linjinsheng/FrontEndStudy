<!DOCTYPE html>
<html>
  <head>
    <title>发布订阅者模式</title>
  </head>
  <body>
    <script>
    console.log('*******************************')
     /**
      1、构造函数中创建”events“对象变量用于存放所有的事件
      2、添加”on“函数，用于订阅事件。
        当总事件中不存在此事件时创建新的事件数组，
        当存在时将”fn“函数添加在该事件对应数组中
      3、添加”emit“函数，用于发布事件，遍历该事件下的函数数组并全部执行
      */
    class EventEmitter {
        constructor() {
            this.events = {}
        }
        on(event, fn) {
            if(!this.events[event]) {
                this.events[event] = [fn]
            } else {
                this.events[event].push(fn)
            }
        }
        emit(event) {
            if(this.events[event]) {
                this.events[event].forEach(callback => callback())
            }
        }
    }
    </script>
  </body>
</html>
